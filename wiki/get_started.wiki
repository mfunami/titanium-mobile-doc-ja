#summary Appcelerator Titanium MobileでiPhoneアプリ開発を始めよう！
#labels about
= Appcelerator Titanium MobileでiPhoneアプリ開発を始めよう！ =
一応、[http://www.codestrong.com/timobile/guides/get_started/ Getting Started with Titanium Mobile]に基づいて準備段階をまとめようと思います。

英語力のなさは前段で露呈していると思いますが、思い込み等で１８０度ねじ曲がった訳になってる可能性も有るので、最後に信じるのは自分（あなたのことです！）ぐらいの気持ちでご覧ください。

また自分の興味がiPhoneにしか向いていないので、そこに特化したような書き方をしておりますが、おそらくAndroidでも同じようにすれば動くはずです（それが謳い文句の製品でもあるので）。

== …の前にすることがあるだろうが！ ==
さて、原文サイトにはいきなりTitanium Developerをインストールしたあとの動きが書いてありますが、その前にやっておかないといけない事があります。

それは各デバイス向けのSDKのインストールに他なりません。

Titanium Mobileの環境はあくまでもデバイスSDKありきで動きますので、確実に事前準備するべきところです。

つまりiPhone向けアプリ開発をするということはSDKが動作するIntel Mac環境(Leopard以上)が必要になります。Windowsユーザの方、Tiger以前のMac OS Xな方はお引き取りくださいませ....

=== iPhone SDKのインストールとか。 ===
iPhone SDKをADC(Apple Developer Connection)からダウンロードしておきましょう。

セットアップから開発環境構築、Provisioning ProfileまわりのアレコレについてはiPhone開発関係の先達たちがまとめてくれてるので、それを参考につきすすんでください(^^;

==== 目指せ！iPhoneアプリ開発エキスパート | gihyo.jp ====
 * http://gihyo.jp/dev/serial/01/iphone/0002
  ** Xcodeは一回起動しておいたほうがいいと思います。オーガナイザとか使う事になりますので...
 * http://gihyo.jp/dev/serial/01/iphone/0009
  ** 実機で動かしますよね？　ならばお布施を払うのです。多分いろいろ躓くところが出てくると思いますが...
 * http://gihyo.jp/dev/serial/01/iphone/0010
  ** 最終的な流れの参考に。

もちろんシミュレータのレベルでしか動作させないのならSDKを放り込むところまでだけで十分です。

それでもObjective-Cを触らずにiPhoneシミュレータ上でアプリを動かす事ができますので。

== Titanium Developer のインストール ==
http://www.appcelerator.com/products/download/ こちらのページを開くと自動的にdmgファイルをダウンロードし、インストールします。ここらの手順はいつも通りでしょう。

インストール後、起動すると、次のような画面が表示されます。

http://img.skitch.com/20090616-ky7u32k56hcabdqr1b7r71ys4r.png

Titaniumを使うに当たって、アカウントを作る必要があります。

入れる情報としてはメアド、パスワード（これらが認証情報です）と姓名といった個人情報です。twitterのscreen nameをいれておくと勝手に公式アカウントがフォローしてくれます。ちなみにぼくは@donayamaですｗ

このアカウントがないとAppceleratorのサポートページやAPIレファレンスといった情報閲覧に影響が出ます。

というかないと開発できませんので、キチンと登録しておきましょう。

起動後、こんな画面がでます。正直分かりづらいです。

http://img.skitch.com/20090616-mpyfsamdg9np1514hbd62keyp2.png

左上の三つのボタンが画面の切り替えなんですが、おそらく一番左のかばんのアイコンのところしか使わないと思います。
（一応Projects, Community, Profileという位置づけです）

あと、ぼくも最初勘違いしていたのですが、Titanium Developerというソフト、*これはIDEではありません*。
どっちかというとコンパイラのフロントエンドみたいなシロモノなので、ここでは開発は一切できません。

Aptanaみたいなでっかい環境でもCarbon EmacsみたいなものでもCotEditorや開発者たちのようにTextMateでも、何でも構わないからそういったエディタを用意しましょう。

閑話休題。New Project画面でのお話に戻ります。

ここではソフトのproject作成を行います。ひな形に基づいたフォルダ・ファイル群が自動生成されると考えていただいていいかと思います。

ここで重要なのはProject typeを「Mobile」に選ぶ事。そして選んだ直後に画面下段にあるInstalled Mobile Platformsで目当てのSDKがキチンと認識されていること（「iPhone SDK found」と表示されてないとツライです…）です。

キチンと認識されていれば、他の項目をうめていくカンタンなお仕事ですよ。

 * Name
  ** アプリケーションの名前です。これあとから変更するの地味に面倒なのでできればキチンと付けましょう。ちなみにiPhoneのHome画面にもこの名前で出てきます。長すぎると...とかで省略されるよ！
 * App Id
  ** iPhone用です。実機動作などをさせる場合にはprovisioning profileというものを使うのですが、それを作るときにもこのApp IDが必要になります。一意である必要が有るので、Javaのユーザ名前空間同様にドメイン名を反転させた名前の付け方をすることが推奨されています。com.twitter.yourscreenname.testappとかそんな感じにしておけばいいと思います。
 * Directory
  ** アプリケーションのソースが展開されるフォルダを指定します。
 * Company/Personal URL
  ** 会社や個人のURLということで、そのままですね。ぼくは http://twitter.com/donayama/ などと放り込んでいます。
 * Titanium SDK version
  ** 最新のSDKを使いましょう。
 * JS Libraries
  ** 必須では有りませんが、いくつかの著名なJavascript fwやlibが列挙されています。お好きなものを選択してください。この解説ではぼくの趣味でjQueryが使われていきますので、ここではjQueryを選んでおきましょうか！

これでCreate Projectすると、Directory欄で指定したフォルダにName欄で指定したフォルダが生成されているはずです。

（これ気をつけないとムダにフォルダ階層が深くなるんですよね…）

 * /Users/account/Dropbox/Dev/Titanium/testapp ここがさっきのDirectory/Nameで構成されます。
  ** /build 特に触る必要のないフォルダ。中間ソース的にあれこれが。
  ** /Resouces あとでがりがり触るフォルダ。主戦場です。中のファイルは自動生成されるもの。
   *** index.html
   *** index.js
   *** index.css
   *** about.html
   *** /iphone アイコンや起動時のスプラッシュスクリーン画像(Default.png)などが入っている。
 ** tiapp.xml アプリの定義とかを行うファイル。

http://img.skitch.com/20090616-ewt986g5nbafifdbttb9pddp7s.png

こういう画面が表示されると思います。
（iPhone・Androidのシミュレータ環境の有無でかわるだけです）

そのまま二番目のアイコン(Run iPhone Emulator)をクリックして画面切り替え後、下の方にあるSDKバージョン(3.1.2など）を選択して、Launch Appボタンをクリックします。

http://img.skitch.com/20090616-5u6gr8tkf7hfayra35a5wtgsb.png

しばらくするとこんな画面になって、iPhoneシミュレータが起動してくると思います。

これでとりあえずは動作確認完了です。

http://f.hatena.ne.jp/images/fotolife/d/donayama/20100126/20100126070736.png

実際操作して挙動確認できるのは「シェイクジェスチャー」の実行によるアラート表示のみです。

実機動作まで行えば、vibrationsボタンをクリックしたときにバイブ動作することもできるんですけどね。その辺は震えたツモリ…ということで。
（カメラ・加速度センサー・GPSといったあたりは実機検証しないと動作確認すらできません）

== 生成されたソース ==
Javascriptのソースにたびたび出てくるTitanium.～というのはTitanium MobileのAPIになります。
Titanium.Media.vibrate()は本体をバイブするためのメソッドですし、Titanium.Gestureというオブジェクトの高級イベントにあたるshakeに対してイベントハンドラを追加しているという寸法です。
shakeイベント内で宣言されているTitanium.UI.createAlertDialogというメソッドはデバイスNative UIの警告ダイアログを生成するためのものです。
（iPhoneかAndroidかというところは抽象化されています）

ついついJavascriptでalert関数を使って表示しようとしてしまうのですが、Titaniumの環境下でalertしてもデバッグログとして出力されるだけになります。要注意。

=== /testapp/tiapp.xml ===
{{{
<?xml version="1.0" encoding="UTF-8"?><ti:app xmlns:ti="http://ti.appcelerator.org">
    <id>com.twitter.donayama.testapp</id>
    <name>testapp</name>
    <version>1.0</version>
    <icon>default_app_logo.png</icon>
    <persistent-wifi>false</persistent-wifi>
    <prerendered-icon>false</prerendered-icon>
    <statusbar-style>opaque</statusbar-style>
    <windows>
        <window>
            <id>initial</id>
            <url>index.html</url>
            <backgroundColor>#111</backgroundColor>
			<icon>ti://featured</icon>
			<barColor>#000</barColor>
			<fullscreen>false</fullscreen>
        </window>
        <window>
            <id>about</id>
            <url>about.html</url>
            <backgroundColor>#111</backgroundColor>
			<icon>ti://top rated</icon>
            <barColor>#000</barColor>
			<fullscreen>false</fullscreen>
        </window>
    </windows>
    <guid>877913e9-a903-4dd3-b111-f0fbfd29ffcc</guid>
</ti:app>
}}}
=== /testapp/Resources/index.html ===
{{{
<html>
<head>
<script type="text/javascript" src="jquery-1.3.2.js"></script>


	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
	<title>Hello Mobile</title>
	<script type="text/javascript" src="index.js"></script>
	<link href="index.css" rel="stylesheet" type="text/css"/>
</head>
<body>
	<h2>Welcome to Titanium Mobile</h2>
	<p>
		Titanium Mobile is a next generation application platform
		for building native mobile applications using web technologies
		such as HTML and JavaScript.
	</p>
	<p>
		You are using Titanium version <span id="version">...</span> 
		on <span id="phone"></span>.
	</p>
	<p>
		Why not have some good <button id="b">vibrations</button> on us?
	</p>
	<p> thank you  &#35874;&#35874;〓 Спасибо Danke ありがとうございました &#44048;&#49324;&#54633;&#45768;&#45796; gracias merci c&#7843;m &#417;n b&#7841;n
		kiitos grazie salamat tak dzi〓kuj〓 terima kasih tak хвала 謝謝〓
		go raibh maith agat
	</p>
</body>
</html>
}}}
=== /testapp/Resources/index.js ===
{{{
window.onload = function()
{
	document.getElementById('version').innerHTML = Titanium.version;
	document.getElementById('phone').innerHTML = Titanium.Platform.name + ' '+Titanium.Platform.version;
	document.getElementById('b').onclick = function() { Titanium.Media.vibrate(); };

	Titanium.Gesture.addEventListener('shake',function(){
		var alerty = Titanium.UI.createAlertDialog();
		alerty.setTitle("Not stirred!");
		alerty.show();
	},false);
	
};
}}}
=== /testapp/Resources/index.css ===
{{{
body
{
	background-color:#111;
	color:#bbb;
	font-family:sans-serif;
}

h1,h2
{
	color:#900;
}

p
{
	margin-bottom:20px;
}
}}}
=== /testapp/Resources/about.html ===
{{{
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
	<title>About Titanium</title>
	<link href="index.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<h2>About Titanium Mobile</h2>
	<p>
		Titanium is brought to you by Appcelerator and many
		contributions and love from our open source community.
	</p>
	<p>
		We'd like to especially thank the following key contributions 
		from:
		
		<ul>
			<li>Blain Hamon</li>
			<li>Don Thorp</li>
			<li>Nolan Wright</li>
			<li>Jeff Haynie</li>
			<li>Marshall Culpepper</li>
			<li>Martin Robinson</li>
			<li>Kevin Whinnery</li>
			<li>Nika Jones</li>
			<li>Daniel Sternberg</li>
		</ul>
	</p>
</body>
</html>
}}}